<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>海王</title>
    <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="format-detection" content="telephone=no">
    <style id="cssAnimation"></style>
    <style>
        .all {
            position: absolute;
            top: 0;
            left: 0;
            width: 90%;
            height: 100%;
        }
        img{
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
<div class="all" id="all">
    <img src="img/2.jpg">
</div>
<script src="jquery-3.3.1.js"></script>
<script>
    var width = document.documentElement.clientWidth;
    var height = document.documentElement.clientHeight;
    var screen_width = width; //屏幕宽度
    window.onload=function(){
        if (width < height) {
            screen_width = height; //如果 是竖屏，灵感的宽度就等于屏高
            var contentDOM = document.getElementById('all');
            contentDOM.style.width = height + 'px';
            contentDOM.style.height = width + 'px';
            contentDOM.style.top = (height - width) / 2 + 'px';
            contentDOM.style.left = 0 - (height - width) / 2 + 'px';
            contentDOM.style.transform = 'rotate(90deg)';
        }
    }
    function orientationHandler(event) {
        var num=event.gamma.toFixed(6)
        var reg = new RegExp("^-?[0-9]*.?[0-9]*$");
        if ( reg.test(num) ) {
            var absVal = Math.abs(num);
            screen_width = height;
            var contentDOM = document.getElementById('all');
            if(num==absVal){
                contentDOM.style.width = height + 'px';
                contentDOM.style.height = width + 'px';
                contentDOM.style.top = (height - width) / 2 + 'px';
                contentDOM.style.left = 0 - (height - width) / 2 + 'px';
                contentDOM.style.transform = 'rotate(-90deg)';
                contentDOM.style.transition='.5s'
            }else{
                contentDOM.style.width = height + 'px';
                contentDOM.style.height = width + 'px';
                contentDOM.style.top = (height - width) / 2 + 'px';
                contentDOM.style.left = 0 - (height - width) / 2 + 'px';
                contentDOM.style.transform = 'rotate(90deg)';
                contentDOM.style.transition='.5s'
            }
        }
    }
    if (window.DeviceOrientationEvent) {
        window.addEventListener("deviceorientation", orientationHandler, false);
    }
</script>
</body>
</html>
